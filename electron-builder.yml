# Electron Builder Configuration for ARUS
# Builds native desktop applications for Windows, macOS, and Linux

appId: com.arus.marine.monitoring
productName: ARUS Marine Monitoring
copyright: Copyright Â© 2025 ARUS

# Build directories
directories:
  buildResources: electron/build
  output: dist/electron

# Files to include in the build
files:
  - electron/**/*
  - package.json
  - "!node_modules/electron"
  - "!node_modules/electron-builder"
  
# Additional resources to package (server code + complete Node.js runtime)
extraResources:
  - from: "dist"
    to: "app/dist"
    filter:
      - "**/*"
      - "!electron/**"
      - "!installers/**"
  - from: "electron/app-package/package.json"
    to: "app/package.json"
  - from: "node_modules"
    to: "app/node_modules"
    filter:
      - "**/*"
      - "!electron/**"
      - "!electron-builder/**"
      - "!app-builder-bin/win/**"
      - "!app-builder-bin/linux/**"

# macOS Configuration
mac:
  category: public.app-category.productivity
  target:
    - dmg
    - zip
  hardenedRuntime: false
  gatekeeperAssess: false
  extraResources:
    - from: "electron/nodejs"
      to: "nodejs"
      filter:
        - "**/*"
  
dmg:
  title: "${productName} ${version}"
  window:
    width: 600
    height: 400

# Windows Configuration  
win:
  icon: electron/build/icon.png
  target:
    - nsis
    - portable
  verifyUpdateCodeSignature: false
  signAndEditExecutable: false
  forceCodeSigning: false
  extraResources:
    - from: "electron/nodejs-windows"
      to: "nodejs"
      filter:
        - "**/*"

nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: always
  createStartMenuShortcut: true
  shortcutName: "${productName}"

# Linux Configuration
linux:
  icon: electron/icon.png
  category: Utility
  target:
    - AppImage
    - deb
    - snap
  maintainer: ARUS Team <support@arus-marine.com>
  vendor: ARUS
  synopsis: Marine Vessel Monitoring and Predictive Maintenance
  description: >
    ARUS is a comprehensive marine vessel monitoring system featuring
    ML-based predictive maintenance, offline-first operation, and
    real-time telemetry analysis.

# Auto-updater configuration (if you set up update server)
publish:
  provider: generic
  url: https://updates.arus-marine.com/

# Compression settings
compression: maximum
asar: true
asarUnpack:
  - node_modules/better-sqlite3/**/*
  - node_modules/@libsql/**/*
